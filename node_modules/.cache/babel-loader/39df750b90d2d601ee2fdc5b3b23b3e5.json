{"remainingRequest":"D:\\MyProjects\\HbuilderX-projects\\2.19z\\node_modules\\babel-loader\\lib\\index.js!D:\\MyProjects\\HbuilderX-projects\\2.19z\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\MyProjects\\HbuilderX-projects\\2.19z\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\MyProjects\\HbuilderX-projects\\2.19z\\src\\components\\beAttack.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\MyProjects\\HbuilderX-projects\\2.19z\\src\\components\\beAttack.vue","mtime":1590317737242},{"path":"D:\\MyProjects\\HbuilderX-projects\\2.19z\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1582103017138},{"path":"D:\\MyProjects\\HbuilderX-projects\\2.19z\\node_modules\\babel-loader\\lib\\index.js","mtime":1582103090028},{"path":"D:\\MyProjects\\HbuilderX-projects\\2.19z\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1582103017138},{"path":"D:\\MyProjects\\HbuilderX-projects\\2.19z\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport moment from 'moment'; //处理时间戳\n\nexport default {\n  data: function data() {\n    return {\n      isLogin: false,\n      loginUid: localStorage.getItem(\"login\"),\n      unread: {},\n      //未读的消息列表\n      attenUnameList: {},\n      //关注集合（包括username）\n      // inputResultNull:false,\t\t//未查到\n      inputTitle: \"\" //要查询的博客标题\n\n    };\n  },\n  filters: {\n    formatDate: function formatDate(value) {\n      return moment(value).format('YYYY-MM-DD HH:mm:ss');\n    },\n    formatDateyy: function formatDateyy(value) {\n      return moment(value.time).format('YYYY-MM-DD');\n    }\n  },\n  mounted: function mounted() {\n    //判断是否要出现“我的，消息”链接\n    if (localStorage.getItem(\"login\") != null) {\n      this.isLogin = true;\n    } //查找未读的消息列表\n\n\n    this.getUnread(); //获取关注集合（包括username）\n\n    this.getUnameList();\n  },\n  methods: {\n    //模糊查询博客\n    likeTitle: function likeTitle() {\n      if (!this.inputTitle) {\n        return;\n      }\n\n      this.$router.push(\"/selectBlog\".concat(this.inputTitle));\n    },\n    //删除关注消息\n    deleteNotice: function deleteNotice(nid) {\n      var _this = this;\n\n      var data = {\n        id: nid\n      };\n      this.$ajax.post('/api/notice/deleteUserNotice', this.$qs.stringify(data)).then(function (response) {\n        _this.$router.go(0);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    //获取关注集合（包括username）\n    getUnameList: function getUnameList() {\n      var _this2 = this;\n\n      var data = {\n        receiveUserId: localStorage.getItem(\"login\")\n      };\n      this.$ajax.post('/api/notice/attenAndUnameList', this.$qs.stringify(data)).then(function (response) {\n        _this2.attenUnameList = response.data;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    //查找全部的关注消息列表\n    getUnread: function getUnread() {\n      var _this3 = this;\n\n      var data = {\n        receiveUserId: this.loginUid\n      };\n      this.$ajax.post('/api/notice/messagelist', this.$qs.stringify(data)).then(function (response) {\n        _this3.unread = response.data;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    //去博客中心\n    gotoBlogCenter: function gotoBlogCenter(uid) {\n      this.$router.push(\"/myBlogCenter\".concat(uid));\n    },\n    //退出登录\n    loginOut: function loginOut() {\n      localStorage.removeItem(\"login\");\n      console.log(\"localStorage=login----\" + localStorage.getItem(\"login\")); // this.$router.push(\"/\");\t\t这个会跳转当前页面，但是不会刷新\n\n      this.$router.go(0); //重新刷新当前页面\n    }\n  }\n};",{"version":3,"sources":["beAttack.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<!-- 导航栏 -->\r\n\t\t<nav class=\"navbar navbar-default\">\r\n\t\t\t<div class=\"container-fluid\">\r\n\t\t\t\t<div class=\"collapse navbar-collapse\" id=\"bs-example-navbar-collapse-1\">\r\n\t\t\t\t\t<ul class=\"nav navbar-nav\">\r\n\t\t\t\t\t\t<!-- <li><a href=\"#\">SHARING</a></li> -->\r\n\t\t\t\t\t\t<li><router-link to=\"/\">首页</router-link></li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t<!-- 查询 -->\r\n\t\t\t\t\t<form class=\"navbar-form navbar-left\">\r\n\t\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t\t<input type=\"text\" v-model.trim=\"inputTitle\" name=\"queryBlogTitle\" class=\"form-control color\" placeholder=\"\">\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<button type=\"button\" @click=\"likeTitle\" class=\"btn btn-default color\">搜索</button>\r\n\t\t\t\t\t\t<!-- <span v-show=\"inputResultNull\" style=\"color: red;margin-left: 10px;\">未查到</span> -->\r\n\t\t\t\t\t</form>\r\n\t\t\t\t\t<ul class=\"nav navbar-nav navbar-right\">\r\n\t\t\t\t\t\t<li><router-link to=\"/editor0\">写博客</router-link></li>\r\n\t\t\t\t\t\t<li class=\"dropdown\"  v-if=\"isLogin\">\r\n\t\t\t\t\t\t\t<a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\" role=\"button\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n\t\t\t\t\t\t\t\t消息\r\n\t\t\t\t\t\t\t\t<span v-show=\"unread.allLength != 0\" class=\"badge\" style=\"background-color: #CD0000;\">\r\n\t\t\t\t\t\t\t\t\t{{unread.allLength}}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<span class=\"caret\"></span>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t<ul class=\"dropdown-menu\" style=\"text-align: left; padding-left: 20px;\">\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<a href=\"#\" @click=\"gotoBlogCenter(unread.pubusers.id)\">公告\r\n\t\t\t\t\t\t\t\t\t\t<span v-show=\"unread.pubLength != 0\" class=\"badge\" style=\"background-color: #CD0000;\">{{unread.pubLength}}</span>\r\n\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<router-link to=\"/beCom\">评论\r\n\t\t\t\t\t\t\t\t\t\t<span v-show=\"unread.comLength != 0\"  class=\"badge\" style=\"background-color: #CD0000;\">{{unread.comLength}}</span>\r\n\t\t\t\t\t\t\t\t\t</router-link>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<router-link to=\"/beAppre\">点赞\r\n\t\t\t\t\t\t\t\t\t\t<span v-show=\"unread.appreLength != 0\" class=\"badge\" style=\"background-color: #CD0000;\">{{unread.appreLength}}</span>\r\n\t\t\t\t\t\t\t\t\t</router-link>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<router-link to=\"/beAttack\">关注\r\n\t\t\t\t\t\t\t\t\t\t<span v-show=\"unread.attenLength != 0\" class=\"badge\" style=\"background-color: #CD0000;\">{{unread.attenLength}}</span>\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t</router-link>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li class=\"dropdown\" v-if=\"isLogin\">\r\n\t\t\t\t\t\t\t<a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\" role=\"button\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n\t\t\t\t\t\t\t\t我的\r\n\t\t\t\t\t\t\t\t<span class=\"caret\"></span>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t<ul class=\"dropdown-menu\">\r\n\t\t\t\t\t\t\t\t<li><router-link to=\"/message\">个人资料</router-link></li>\r\n\t\t\t\t\t\t\t\t<li><router-link :to=\"`/myBlogCenter${loginUid}`\">博客中心</router-link></li>\r\n\t\t\t\t\t\t\t\t<li><router-link to=\"/collect\">我的收藏</router-link></li>\r\n\t\t\t\t\t\t\t\t<li><router-link to=\"/follow\">我的关注</router-link></li>\r\n\t\t\t\t\t\t\t\t<li><router-link to=\"/myfan\">我的粉丝</router-link></li>\r\n\t\t\t\t\t\t\t\t<li><a href=\"#\" @click=\"loginOut\">登出</a></li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li v-else=\"isLogin\"><router-link to=\"/login\">登录/注册</router-link></a></li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</nav>\r\n\t\t\r\n\t\t\r\n\t\t<!-- 右边 -->\r\n\t\t<div class=\"m-card-right \">\r\n\t\t\t<div>\r\n\t\t\t\t<div id=\"my-title\">\r\n\t\t\t\t\t关注\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"my-title-bottom\">\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t<li class=\"item-follow\" v-for=\"item in attenUnameList\">\r\n\t\t\t\t\t\t\t<a href=\"#\" @click=\"gotoBlogCenter(item.sendUserId)\" class=\"fol-name attack-name\" >{{item.username}}</a>\r\n\t\t\t\t\t\t\t<span class=\"buttright\" >关注了你</span>\r\n\t\t\t\t\t\t\t<span class=\"attentime\" >{{item.sendTime | formatDateyy}}</span>\r\n\t\t\t\t\t\t\t<a href=\"#\" @click=\"deleteNotice(item.id)\">\r\n\t\t\t\t\t\t\t\t<span class=\"glyphicon glyphicon-remove\" aria-hidden=\"true\" style=\"color: #B22222; margin-right: 8px; float: right;margin-top: 48px;\"></span>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t</div>\r\n\t\t\r\n\t</div>\n</template>\n\n<script>\r\n\timport moment from 'moment'\t\t//处理时间戳\r\n\texport default{\r\n\t\tdata(){\r\n\t\t\treturn{\r\n\t\t\t\tisLogin:false,\r\n\t\t\t\tloginUid:localStorage.getItem(\"login\"),\r\n\t\t\t\tunread:{},\t//未读的消息列表\r\n\t\t\t\tattenUnameList:{},\t//关注集合（包括username）\r\n\t\t\t\t// inputResultNull:false,\t\t//未查到\r\n\t\t\t\tinputTitle:\"\",\t//要查询的博客标题\r\n\t\t\t}\r\n\t\t},\r\n\t\tfilters: {\r\n\t\t\tformatDate: function (value) {\r\n\t\t\t\treturn moment(value).format('YYYY-MM-DD HH:mm:ss');\r\n\t\t\t},\r\n\t\t\tformatDateyy: function (value) {\r\n\t\t\t\treturn moment(value.time).format('YYYY-MM-DD');\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t//判断是否要出现“我的，消息”链接\r\n\t\t\tif(localStorage.getItem(\"login\")!=null){\r\n\t\t\t\tthis.isLogin=true;\r\n\t\t\t}\r\n\t\t\t//查找未读的消息列表\r\n\t\t\tthis.getUnread();\r\n\t\t\t//获取关注集合（包括username）\r\n\t\t\tthis.getUnameList();\r\n\t\t\t\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\t//模糊查询博客\r\n\t\t\tlikeTitle(){\r\n\t\t\t\tif(!this.inputTitle){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.$router.push(`/selectBlog${this.inputTitle}`);\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t//删除关注消息\r\n\t\t\tdeleteNotice(nid){\r\n\t\t\t\tlet data={\r\n\t\t\t\t\tid:nid,\r\n\t\t\t\t}\r\n\t\t\t\tthis.$ajax.post('/api/notice/deleteUserNotice', this.$qs.stringify(data))\r\n\t\t\t\t.then(response =>{\r\n\t\t\t\t\tthis.$router.go(0);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error =>{\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//获取关注集合（包括username）\r\n\t\t\tgetUnameList(){\r\n\t\t\t\tlet data={\r\n\t\t\t\t\treceiveUserId:localStorage.getItem(\"login\"),\r\n\t\t\t\t}\r\n\t\t\t\tthis.$ajax.post('/api/notice/attenAndUnameList', this.$qs.stringify(data))\r\n\t\t\t\t.then(response =>{\r\n\t\t\t\t\tthis.attenUnameList = response.data;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error =>{\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//查找全部的关注消息列表\r\n\t\t\tgetUnread(){\r\n\t\t\t\tlet data={\r\n\t\t\t\t\treceiveUserId:this.loginUid,\r\n\t\t\t\t}\r\n\t\t\t\tthis.$ajax.post('/api/notice/messagelist', this.$qs.stringify(data))\r\n\t\t\t\t.then(response =>{\r\n\t\t\t\t\tthis.unread = response.data;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error =>{\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//去博客中心\r\n\t\t\tgotoBlogCenter(uid){\r\n\t\t\t\tthis.$router.push(`/myBlogCenter${uid}`);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//退出登录\r\n\t\t\tloginOut(){\r\n\t\t\t\tlocalStorage.removeItem(\"login\");\r\n\t\t\t\tconsole.log(\"localStorage=login----\"+localStorage.getItem(\"login\"));\r\n\t\t\t\t// this.$router.push(\"/\");\t\t这个会跳转当前页面，但是不会刷新\r\n\t\t\t\tthis.$router.go(0);//重新刷新当前页面\r\n\t\t\t}\r\n\t\t}\r\n\t}\n</script>\n\n<style>\r\n\t.buttright{\r\n\t\tfont-size: 12px; \r\n\t\tcolor: gray;\r\n\t\tmargin-left: 10px;\r\n\t\tmargin-top: 15px;\r\n\t\twidth: 69%; \r\n\t\tdisplay: inline-block;\r\n\t}\r\n\t.attentime{\r\n\t\tfont-size: 12px; \r\n\t\tcolor: gray;\r\n\t\tmargin-left: 10px;\r\n\t}\r\n\t.attack-name{\r\n\t\tmargin-top: 15px;\r\n\t}\r\n\t\t\n</style>\n"],"sourceRoot":"src/components"}]}