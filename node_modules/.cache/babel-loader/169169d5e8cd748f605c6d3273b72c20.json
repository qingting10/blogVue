{"remainingRequest":"D:\\MyProjects\\HbuilderX-projects\\2.19z\\node_modules\\babel-loader\\lib\\index.js!D:\\MyProjects\\HbuilderX-projects\\2.19z\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\MyProjects\\HbuilderX-projects\\2.19z\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\MyProjects\\HbuilderX-projects\\2.19z\\src\\components\\message.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\MyProjects\\HbuilderX-projects\\2.19z\\src\\components\\message.vue","mtime":1587041502433},{"path":"D:\\MyProjects\\HbuilderX-projects\\2.19z\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1582103017138},{"path":"D:\\MyProjects\\HbuilderX-projects\\2.19z\\node_modules\\babel-loader\\lib\\index.js","mtime":1582103090028},{"path":"D:\\MyProjects\\HbuilderX-projects\\2.19z\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1582103017138},{"path":"D:\\MyProjects\\HbuilderX-projects\\2.19z\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      isLogin: false,\n      loginUid: localStorage.getItem(\"login\"),\n      curentImg: require(\"../../public/img/17.jpg\"),\n      //存储当前的头像\n      //17号图片的路径是\t/img/17.a9ed5719.jpg\n      imgList: [{\n        name: \"1\",\n        url: require(\"../../public/img/1.jpg\")\n      }, {\n        name: \"2\",\n        url: require(\"../../public/img/2.jpg\")\n      }, {\n        name: \"3\",\n        url: require(\"../../public/img/3.jpg\")\n      }, {\n        name: \"4\",\n        url: require(\"../../public/img/4.jpg\")\n      }, {\n        name: \"5\",\n        url: require(\"../../public/img/5.jpg\")\n      }, {\n        name: \"6\",\n        url: require(\"../../public/img/6.jpg\")\n      }, {\n        name: \"7\",\n        url: require(\"../../public/img/7.jpg\")\n      }, {\n        name: \"8\",\n        url: require(\"../../public/img/8.jpg\")\n      }, {\n        name: \"9\",\n        url: require(\"../../public/img/9.jpg\")\n      }, {\n        name: \"10\",\n        url: require(\"../../public/img/10.jpg\")\n      }, {\n        name: \"11\",\n        url: require(\"../../public/img/11.jpg\")\n      }, {\n        name: \"12\",\n        url: require(\"../../public/img/12.jpg\")\n      }, {\n        name: \"13\",\n        url: require(\"../../public/img/13.jpg\")\n      }, {\n        name: \"14\",\n        url: require(\"../../public/img/14.jpg\")\n      }, {\n        name: \"15\",\n        url: require(\"../../public/img/15.jpg\")\n      }, {\n        name: \"16\",\n        url: require(\"../../public/img/16.jpg\")\n      }],\n      srcimg: \"\",\n      //存储用户选择的图片\n      user: {},\n      //存储当前系统用户\n      id: localStorage.getItem(\"login\"),\n      unread: {},\n      //未读的关注消息列表\n      // inputResultNull:false,\t\t//未查到\n      inputTitle: \"\" //要查询的博客标题\n\n    };\n  },\n  mounted: function mounted() {\n    //判断是否要出现“登录/注册”链接\n    if (localStorage.getItem(\"login\") != null) {\n      this.isLogin = true;\n    }\n\n    this.getMessage(); //查找未读的关注消息列表\n\n    this.getUnread();\n  },\n  methods: {\n    //模糊查询博客\n    likeTitle: function likeTitle() {\n      if (!this.inputTitle) {\n        return;\n      }\n\n      this.$router.push(\"/selectBlog\".concat(this.inputTitle));\n    },\n    //查找未读的关注消息列表\n    getUnread: function getUnread() {\n      var _this = this;\n\n      var data = {\n        receiveUserId: this.loginUid\n      };\n      this.$ajax.post('/api/notice/messagelist', this.$qs.stringify(data)).then(function (response) {\n        _this.unread = response.data;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    //退出登录\n    loginOut: function loginOut() {\n      localStorage.removeItem(\"login\");\n      console.log(\"localStorage=login----\" + localStorage.getItem(\"login\")); // this.$router.push(\"/\");\t\t这个会跳转当前页面，但是不会刷新\n\n      this.$router.go(0); //重新刷新当前页面\n    },\n    //获取当前的基本信息\n    getMessage: function getMessage() {\n      var _this2 = this;\n\n      var data = {\n        id: this.id\n      };\n      this.$ajax.post('/api/user/getUserById', this.$qs.stringify(data)).then(function (response) {\n        _this2.user = response.data;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    //模态框显示\n    modify: function modify() {\n      $('#myModal').modal('show');\n    },\n    //获取点击的图片对象\n    getava: function getava(event) {\n      var target = event.target || window.event.srcElement; //获取对应元素的id值\n\n      var text = target.getAttribute('src');\n      console.log(\"src----------------\" + text);\n      this.srcimg = text;\n    },\n    //修改头像\n    modifyava: function modifyava() {\n      var _this3 = this;\n\n      var data = {\n        id: this.id,\n        avatar: this.srcimg\n      };\n      this.$ajax.post('/api/user/updateAva', this.$qs.stringify(data)).then(function (response) {\n        console.log(\"成功修改\");\n        _this3.curentImg = _this3.srcimg;\n        $('#myModal').modal('hide'); //模态框隐藏\n\n        _this3.$router.go(0); //刷新页面\n\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }\n};",{"version":3,"sources":["message.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<nav class=\"navbar navbar-default\">\r\n\t\t\t<div class=\"container-fluid\">\r\n\t\t\t\t<div class=\"collapse navbar-collapse\" id=\"bs-example-navbar-collapse-1\">\r\n\t\t\t\t\t<ul class=\"nav navbar-nav\">\r\n\t\t\t\t\t\t<!-- <li><a href=\"#\">SHARING</a></li> -->\r\n\t\t\t\t\t\t<li><router-link to=\"/\">首页</router-link></li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t<!-- 查询 -->\r\n\t\t\t\t\t<form class=\"navbar-form navbar-left\">\r\n\t\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t\t<input type=\"text\" v-model.trim=\"inputTitle\" name=\"queryBlogTitle\" class=\"form-control color\" placeholder=\"\">\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<button type=\"button\" @click=\"likeTitle\" class=\"btn btn-default color\">搜索</button>\r\n\t\t\t\t\t\t<!-- <span v-show=\"inputResultNull\" style=\"color: red;margin-left: 10px;\">未查到</span> -->\r\n\t\t\t\t\t</form>\r\n\t\t\t\t\t<ul class=\"nav navbar-nav navbar-right\">\r\n\t\t\t\t\t\t<li><router-link to=\"/editor0\">写博客</router-link></li>\r\n\t\t\t\t\t\t<li class=\"dropdown\"  v-if=\"isLogin\">\r\n\t\t\t\t\t\t\t<a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\" role=\"button\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n\t\t\t\t\t\t\t\t消息\r\n\t\t\t\t\t\t\t\t<span v-show=\"unread.allLength != 0\" class=\"badge\" style=\"background-color: #CD0000;\">\r\n\t\t\t\t\t\t\t\t\t{{unread.allLength}}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<span class=\"caret\"></span>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t<ul class=\"dropdown-menu\" style=\"text-align: left; padding-left: 20px;\">\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<a href=\"#\" @click=\"gotoBlogCenter(unread.pubusers.id)\">公告\r\n\t\t\t\t\t\t\t\t\t\t<span v-show=\"unread.pubLength != 0\" class=\"badge\" style=\"background-color: #CD0000;\">{{unread.pubLength}}</span>\r\n\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<router-link to=\"/beCom\">评论\r\n\t\t\t\t\t\t\t\t\t\t<span v-show=\"unread.comLength != 0\"  class=\"badge\" style=\"background-color: #CD0000;\">{{unread.comLength}}</span>\r\n\t\t\t\t\t\t\t\t\t</router-link>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<router-link to=\"/beAppre\">点赞\r\n\t\t\t\t\t\t\t\t\t\t<span v-show=\"unread.appreLength != 0\" class=\"badge\" style=\"background-color: #CD0000;\">{{unread.appreLength}}</span>\r\n\t\t\t\t\t\t\t\t\t</router-link>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<router-link to=\"/beAttack\">关注\r\n\t\t\t\t\t\t\t\t\t\t<span v-show=\"unread.attenLength != 0\" class=\"badge\" style=\"background-color: #CD0000;\">{{unread.attenLength}}</span>\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t</router-link>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li class=\"dropdown\" v-if=\"isLogin\">\r\n\t\t\t\t\t\t\t<a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\" role=\"button\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n\t\t\t\t\t\t\t\t我的\r\n\t\t\t\t\t\t\t\t<span class=\"caret\"></span>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t<ul class=\"dropdown-menu\">\r\n\t\t\t\t\t\t\t\t<li><router-link to=\"/message\">个人资料</router-link></li>\r\n\t\t\t\t\t\t\t\t<li><router-link :to=\"`/myBlogCenter${loginUid}`\">博客中心</router-link></li>\r\n\t\t\t\t\t\t\t\t<li><router-link to=\"/collect\">我的收藏</router-link></li>\r\n\t\t\t\t\t\t\t\t<li><router-link to=\"/follow\">我的关注</router-link></li>\r\n\t\t\t\t\t\t\t\t<li><router-link to=\"/myfan\">我的粉丝</router-link></li>\r\n\t\t\t\t\t\t\t\t<li><a href=\"#\" @click=\"loginOut\">登出</a></li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li v-else=\"isLogin\"><router-link to=\"/login\">登录/注册</router-link></a></li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</nav>\r\n\t\t\r\n\t\t\r\n\t\t<!-- 右边 -->\r\n\t\t<div class=\"m-card-right \">\r\n\t\t\t<div>\r\n\t\t\t\t<div id=\"my-title\">\r\n\t\t\t\t\t个人资料\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"my-title-bottom\">\r\n\t\t\t\t\t<div class=\"mess-header\">\r\n\t\t\t\t\t\t<img class=\"mess-ava\" :src=\"user.avatar\"/>\r\n\t\t\t\t\t\t<p class=\"mess-modify\" @click=\"modify\">修改头像</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"mess-right\">\r\n\t\t\t\t\t\t<div class=\"mess-id\">ID: {{user.username}}</div>\r\n\t\t\t\t\t\t<div class=\"mess-info\">\r\n\t\t\t\t\t\t\t<span>博客 {{user.blognum}}</span>\r\n\t\t\t\t\t\t\t<span>粉丝 {{user.fans}}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"mess-info\">\r\n\t\t\t\t\t\t\t<span>点赞 {{user.appreciate}}</span>\r\n\t\t\t\t\t\t\t<span>评论 {{user.communicate}}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t  \r\n\t\t</div>\r\n\t\t\r\n\t\t<!-- 模态框（Modal） -->\r\n\t\t<div class=\"modal fade\" id=\"myModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\">\r\n\t\t    <div class=\"modal-dialog\">\r\n\t\t        <div class=\"modal-content\">\r\n\t\t            <div class=\"modal-header\">\r\n\t\t                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">&times;</button>\r\n\t\t                <h4 class=\"modal-title\" id=\"myModalLabel\">选择图片</h4>\r\n\t\t            </div>\r\n\t\t            <div class=\"modal-body mess-body\">\r\n\t\t\t\t\t\t<!-- <div class=\"mess-header\"> -->\r\n\t\t\t\t\t\t<div v-for=\"item in imgList\">\r\n\t\t\t\t\t\t\t<img  @click=\"getava($event)\" ref=\"myava\" class=\"mess-ava mess-ava-change\" v-bind:src=\"item.url\" />\r\n\t\t\t\t\t\t\t<!-- <img v-show=\"srcimg\" :src=\"srcimg\" class=\"mess-ava mess-ava-change\"/> -->\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<!-- 要做获取图片路径！！！！ -->\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t            <div class=\"modal-footer\">\r\n\t\t                <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">关闭</button>\r\n\t\t                <button type=\"button\" class=\"btn btn-primary\" @click=\"modifyava\">确定</button>\r\n\t\t            </div>\r\n\t\t        </div><!-- /.modal-content -->\r\n\t\t    </div><!-- /.modal -->\r\n\t\t</div>\r\n\t</div>\n</template>\n\n<script>\r\n\texport default{\r\n\t\tdata(){\r\n\t\t\treturn{\r\n\t\t\t\tisLogin:false,\r\n\t\t\t\tloginUid:localStorage.getItem(\"login\"),\r\n\t\t\t\tcurentImg:require(`../../public/img/17.jpg`),\t//存储当前的头像\r\n\t\t\t\t//17号图片的路径是\t/img/17.a9ed5719.jpg\r\n\t\t\t\timgList:[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"1\",\r\n\t\t\t\t\t\turl: require(`../../public/img/1.jpg`)\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"2\",\r\n\t\t\t\t\t\turl: require(`../../public/img/2.jpg`)\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"3\",\r\n\t\t\t\t\t\turl: require(`../../public/img/3.jpg`)\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"4\",\r\n\t\t\t\t\t\turl: require(`../../public/img/4.jpg`)\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"5\",\r\n\t\t\t\t\t\turl: require(`../../public/img/5.jpg`)\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"6\",\r\n\t\t\t\t\t\turl: require(`../../public/img/6.jpg`)\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"7\",\r\n\t\t\t\t\t\turl: require(`../../public/img/7.jpg`)\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"8\",\r\n\t\t\t\t\t\turl: require(`../../public/img/8.jpg`)\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"9\",\r\n\t\t\t\t\t\turl: require(`../../public/img/9.jpg`)\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"10\",\r\n\t\t\t\t\t\turl: require(`../../public/img/10.jpg`)\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"11\",\r\n\t\t\t\t\t\turl: require(`../../public/img/11.jpg`)\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"12\",\r\n\t\t\t\t\t\turl: require(`../../public/img/12.jpg`)\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"13\",\r\n\t\t\t\t\t\turl: require(`../../public/img/13.jpg`)\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"14\",\r\n\t\t\t\t\t\turl: require(`../../public/img/14.jpg`)\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"15\",\r\n\t\t\t\t\t\turl: require(`../../public/img/15.jpg`)\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"16\",\r\n\t\t\t\t\t\turl: require(`../../public/img/16.jpg`)\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\r\n\t\t\t\t],\r\n\t\t\t\tsrcimg:\"\",\t//存储用户选择的图片\r\n\t\t\t\tuser:{},\t//存储当前系统用户\r\n\t\t\t\tid:localStorage.getItem(\"login\"),\r\n\t\t\t\tunread:{},\t//未读的关注消息列表\r\n\t\t\t\t// inputResultNull:false,\t\t//未查到\r\n\t\t\t\tinputTitle:\"\",\t//要查询的博客标题\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t//判断是否要出现“登录/注册”链接\r\n\t\t\tif(localStorage.getItem(\"login\")!=null){\r\n\t\t\t\tthis.isLogin=true;\r\n\t\t\t}\r\n\t\t\tthis.getMessage();\r\n\t\t\t//查找未读的关注消息列表\r\n\t\t\tthis.getUnread();\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\t//模糊查询博客\r\n\t\t\tlikeTitle(){\r\n\t\t\t\tif(!this.inputTitle){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.$router.push(`/selectBlog${this.inputTitle}`);\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t//查找未读的关注消息列表\r\n\t\t\tgetUnread(){\r\n\t\t\t\tlet data={\r\n\t\t\t\t\treceiveUserId:this.loginUid,\r\n\t\t\t\t}\r\n\t\t\t\tthis.$ajax.post('/api/notice/messagelist', this.$qs.stringify(data))\r\n\t\t\t\t.then(response =>{\r\n\t\t\t\t\tthis.unread = response.data;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error =>{\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//退出登录\r\n\t\t\tloginOut(){\r\n\t\t\t\tlocalStorage.removeItem(\"login\");\r\n\t\t\t\tconsole.log(\"localStorage=login----\"+localStorage.getItem(\"login\"));\r\n\t\t\t\t// this.$router.push(\"/\");\t\t这个会跳转当前页面，但是不会刷新\r\n\t\t\t\tthis.$router.go(0);//重新刷新当前页面\r\n\t\t\t},\r\n\t\t\t//获取当前的基本信息\r\n\t\t\tgetMessage(){\r\n\t\t\t\tlet data={\r\n\t\t\t\t\tid:this.id\r\n\t\t\t\t}\r\n\t\t\t\tthis.$ajax.post('/api/user/getUserById', this.$qs.stringify(data))\r\n\t\t\t\t.then(response =>{\r\n\t\t\t\t\tthis.user = response.data;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error =>{\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//模态框显示\r\n\t\t\tmodify(){\r\n\t\t\t\t$('#myModal').modal('show');\t\r\n\t\t\t},\r\n\t\t\t//获取点击的图片对象\r\n\t\t\tgetava(event){\r\n\t\t\t\tvar target = event.target || window.event.srcElement\r\n\t\t\t\t//获取对应元素的id值\r\n\t\t\t\tvar text = target.getAttribute('src');\r\n\t\t\t\tconsole.log(\"src----------------\"+text);\r\n\t\t\t\tthis.srcimg = text;\r\n\t\t\t},\r\n\t\t\t//修改头像\r\n\t\t\tmodifyava(){\r\n\t\t\t\tlet data={\r\n\t\t\t\t\tid:this.id,\r\n\t\t\t\t\tavatar:this.srcimg,\r\n\t\t\t\t}\r\n\t\t\t\tthis.$ajax.post('/api/user/updateAva', this.$qs.stringify(data))\r\n\t\t\t\t.then(response =>{\r\n\t\t\t\t\tconsole.log(\"成功修改\");\r\n\t\t\t\t\tthis.curentImg = this.srcimg;\r\n\t\t\t\t\t$('#myModal').modal('hide');\t//模态框隐藏\r\n\t\t\t\t\tthis.$router.go(0);\t//刷新页面\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error =>{\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t}\n</script>\n\t\n\t\n<style>\r\n\t\r\n\t/* 右边-博客 */\r\n\t.m-card-right{\r\n\t\t/* position: absolute; */\r\n\t\tfloat: right;\r\n\t\tmargin-right: 200px;\r\n\t\tmargin-top: -10px;\r\n\t\twidth: 68%;\r\n\t\tbackground-color: white;\r\n\t\t/* padding: 0 24px 16px 0; */\r\n\t\t/* background-color: antiquewhite; */\r\n\t}\r\n\t.m-card-right>div{\r\n\t\tbackground-color: white;\r\n\t\t/* padding: 0 24px; */\r\n\t\t\r\n\t}\t\r\n\t/* 博客标题 */\r\n\t#my-title{\r\n\t\tfont-size: 18px;\r\n\t\tcolor: #3d3d3d;\r\n\t\theight: 88px;\r\n\t\tline-height: 90px;\r\n\t\t/* border-bottom: 1px solid #e0e0e0; */\r\n\t\tpadding: 0 24px;\r\n\t\tfont-weight: 600;\r\n\t\ttext-align: left;\r\n\t\t/* padding-top: 16px; */\r\n\t\t/* margin-bottom: 8px; */\r\n\t\tborder-bottom: none;\r\n\t\tcolor: #000000;\r\n\t}\r\n\t.my-title-bottom{\r\n\t\tborder-top: 1px solid #e0e0e0;\r\n\t\tpadding: 0 24px;\r\n\t\ttext-align: left;\r\n\t\tposition: absolute;\r\n\t\tbackground-color: white;\r\n\t\twidth: 68%;\r\n\t}\r\n\t\r\n\t.mess-header{\r\n\t\tfloat: left;\r\n\t\ttext-align: center;\r\n\t\tmargin-right: 16px;\r\n\t\tcursor: pointer;\r\n\t}\r\n\t.mess-ava{\r\n\t\twidth: 100px;\r\n\t\theight: 100px;\r\n\t\tborder-radius: 50%;\r\n\t\tmargin: 16px auto 0;\r\n\t}\r\n\t/* 模态框的body */\r\n\t.mess-body{\r\n\t\tmin-height: 550px;\r\n\t}\r\n\t.mess-body>div{\r\n\t\tpadding:0 30px 0 35px ;\r\n\t}\r\n\t.mess-ava-change{\r\n\t\tfloat: left;\r\n\t\tmargin-right: 25px;\r\n\t\tmargin-bottom: 10px;\r\n\t}\r\n\t.mess-modify{\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #3399ea;\r\n\t\tmargin-top: 8px;\r\n\t\tcursor: pointer;\r\n\t}\r\n\t/* 头像右边 */\r\n\t.mess-right{\r\n\t\tfloat: left;\r\n\t}\r\n\t.mess-id{\r\n\t\tmargin-top: 16px;\r\n\t\theight: 20px;\r\n\t\tline-height: 20px;\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #999;\r\n\t}\r\n\t.mess-info{\r\n\t\tmargin-top: 8px;\r\n\t\tmargin-bottom: 16px;\r\n\t}\r\n\t.mess-info>span{\r\n\t\tmargin-right: 16px;\r\n\t\tcolor: rgb(77, 77, 77);\r\n\t\tfont-size: 14px;\r\n\t}\n</style>\n"],"sourceRoot":"src/components"}]}