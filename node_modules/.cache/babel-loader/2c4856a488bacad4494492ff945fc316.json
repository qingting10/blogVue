{"remainingRequest":"D:\\MyProjects\\HbuilderX-projects\\2.19z\\node_modules\\babel-loader\\lib\\index.js!D:\\MyProjects\\HbuilderX-projects\\2.19z\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\MyProjects\\HbuilderX-projects\\2.19z\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\MyProjects\\HbuilderX-projects\\2.19z\\src\\components\\myBlogCenter.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\MyProjects\\HbuilderX-projects\\2.19z\\src\\components\\myBlogCenter.vue","mtime":1587094049593},{"path":"D:\\MyProjects\\HbuilderX-projects\\2.19z\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1582103017138},{"path":"D:\\MyProjects\\HbuilderX-projects\\2.19z\\node_modules\\babel-loader\\lib\\index.js","mtime":1582103090028},{"path":"D:\\MyProjects\\HbuilderX-projects\\2.19z\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1582103017138},{"path":"D:\\MyProjects\\HbuilderX-projects\\2.19z\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\MyProjects\\HbuilderX-projects\\2.19z\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1582103017138},{"path":"D:\\MyProjects\\HbuilderX-projects\\2.19z\\node_modules\\babel-loader\\lib\\index.js","mtime":1582103090028},{"path":"D:\\MyProjects\\HbuilderX-projects\\2.19z\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1582103017138},{"path":"D:\\MyProjects\\HbuilderX-projects\\2.19z\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport moment from 'moment'; //处理时间戳\n\nexport default {\n  data: function data() {\n    return {\n      isLogin: false,\n      loginUid: localStorage.getItem(\"login\"),\n      currentUid: \"\",\n      //某个被查看用户的id\n      user: \"\",\n      //当前被查看用户\n      blogList: \"\",\n      //博客列表\n      newSixBloglist: {},\n      //最新的6个博客\n      classifyList: {},\n      //博客分类列表\n      sixHotBlog: {},\n      //阅读数最多的6个博客\n      usersmark: {},\n      //排名\t等级\n      message: {},\n      //公告，评论，点赞，关注\n      unread: {},\n      //未读的关注消息列表\n      // inputResultNull:false,\t\t//未查到\n      inputTitle: \"\" //要查询的博客标题\n      // showCname:\"\",\n\n    };\n  },\n  mounted: function mounted() {\n    // this.showCname = localStorage.getItem(\"cname\");\n    //判断是否要出现“我的，消息”链接\n    if (localStorage.getItem(\"login\") != null) {\n      this.isLogin = true;\n    } //获取某个被查看用户的id\n\n\n    this.currentUid = this.$router.history.current.params.userId; // console.log(this.currentUid);\n    //获取当前的用户信息\n\n    this.getUser(); //最新的6个博客\n\n    this.getSixBlogs(); //6个最火（点击量多）blog\n\n    this.getHotBlogs(); //博客分类列表\n\n    this.getClassifylist(); //排名总运算\n\n    this.getFloor(); //博客列表\n\n    if (!this.blogList) {\n      this.getBlogList();\n    } //查找未读的关注消息列表\n\n\n    this.getUnread();\n  },\n  filters: {\n    formatDate: function formatDate(value) {\n      // console.log(value.time);\n      // return moment(moment(value).format('YYYY MM DD HH:mm:ss')).valueOf();\n      return moment(value.time).format('YYYY-MM-DD HH:mm:ss');\n    }\n  },\n  methods: {\n    //查找博客分类表\n    findCnameList: function findCnameList(cid, curUid) {\n      var _this = this;\n\n      var data = {\n        cid: cid,\n        userId: curUid\n      };\n      this.$ajax.post(\"/api/blog/cnameBlogList\", this.$qs.stringify(data)).then(function (response) {\n        _this.blogList = response.data; //设置顶头的分类名显示\n        // localStorage.setItem(\"cname\", false);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    //模糊查询博客\n    likeTitle: function likeTitle() {\n      if (!this.inputTitle) {\n        return;\n      }\n\n      this.$router.push(\"/selectBlog\".concat(this.inputTitle));\n    },\n    //查找未读的关注消息列表\n    getUnread: function getUnread() {\n      var _this2 = this;\n\n      //判断用户是否登录\n      if (!this.isLogin) {\n        //用户没登录就直接返回\t不执行\n        return;\n      } else {\n        var data = {\n          receiveUserId: this.loginUid\n        };\n        this.$ajax.post('/api/notice/messagelist', this.$qs.stringify(data)).then(function (response) {\n          _this2.unread = response.data;\n        }).catch(function (error) {\n          console.log(error);\n        });\n      }\n    },\n    //排名总运算\n    getFloor: function getFloor() {\n      var _this3 = this;\n\n      var data = {\n        uid: this.currentUid\n      };\n      this.$ajax.post('/api/user/computeFloor', this.$qs.stringify(data)).then(function (response) {\n        console.log(response.data);\n        _this3.usersmark = response.data;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    //6个最火（点击量多）blog\n    getHotBlogs: function getHotBlogs() {\n      var _this4 = this;\n\n      var data = {\n        userId: this.currentUid\n      };\n      this.$ajax.post('/api/blog/sixHotBlogs', this.$qs.stringify(data)).then(function (response) {\n        _this4.sixHotBlog = response.data;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    //博客分类\n    getClassifylist: function getClassifylist() {\n      var _this5 = this;\n\n      var data = {\n        userId: this.currentUid\n      };\n      this.$ajax.post('/api/classify/classnameList', this.$qs.stringify(data)).then(function (response) {\n        _this5.classifyList = response.data;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    //最新的6个博客\n    getSixBlogs: function getSixBlogs() {\n      var _this6 = this;\n\n      var data = {\n        userId: this.currentUid\n      };\n      this.$ajax.post('/api/blog/sixNewList', this.$qs.stringify(data)).then(function (response) {\n        _this6.newSixBloglist = response.data;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    //按访问量排序\n    byVisitnum: function byVisitnum() {\n      var _this7 = this;\n\n      var data = {\n        userId: this.currentUid\n      };\n      this.$ajax.post('/api/blog/orderByVisit', this.$qs.stringify(data)).then(function (response) {\n        _this7.blogList = response.data;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    //按创建时间排序博客\n    timeLast: function timeLast() {\n      var _this8 = this;\n\n      var data = {\n        userId: this.currentUid\n      };\n      this.$ajax.post('/api/blog/timeLastBloglist', this.$qs.stringify(data)).then(function (response) {\n        _this8.blogList = response.data; // this.$router.go(0);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    //删除博客\n    deleteBlog: function deleteBlog(bid) {\n      var _this9 = this;\n\n      var data = {\n        bid: bid,\n        uid: this.loginUid\n      };\n      this.$ajax.post('/api/blog/deleteVueBlog', this.$qs.stringify(data)).then(function (response) {\n        alert(\"删除成功\");\n\n        _this9.$router.go(0);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    //编辑博客\n    gotoEditor: function gotoEditor(bid) {\n      this.$router.push(\"/editor\".concat(bid));\n    },\n    //查看博客\n    gotoBlogDetail: function gotoBlogDetail(bid) {\n      this.$router.push(\"/blogDetail\".concat(bid));\n    },\n    //去博客中心\n    gotoBlogCenter: function gotoBlogCenter(uid) {\n      // alert(uid);\n      this.$router.push(\"/myBlogCenter\".concat(uid));\n    },\n    //添加“关注”消息记录\n    setAttentionRecord: function setAttentionRecord() {\n      var data = {\n        sendUserId: localStorage.getItem(\"login\"),\n        receiveUserId: this.user.id,\n        type: \"关注\"\n      };\n      this.$ajax.post('/api/notice/attentionRecord', this.$qs.stringify(data)).then(function (response) {\n        console.log(\"关注记录\");\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    //关注\n    attention: function attention() {\n      var _this10 = this;\n\n      //判断登录\n      if (!this.isLogin) {\n        this.$router.push(\"login\");\n      } else {\n        var data = {\n          userId: localStorage.getItem(\"login\"),\n          byUserId: this.user.id\n        };\n        this.$ajax.post('/api/attention/addAttention', this.$qs.stringify(data)).then(function (response) {\n          // 要判断有没有关注，关注的话，往通知表里加 “关注” 记录\n          if (response.data == \"成功关注\") {\n            //添加\"关注\"消息记录\n            _this10.setAttentionRecord(); // alert(response.data);\n\n          }\n\n          alert(response.data);\n        }).catch(function (error) {\n          console.log(error);\n        });\n      }\n    },\n    //获取当前（被查看）用户的用户信息\n    getUser: function getUser() {\n      var _this11 = this;\n\n      var data = {\n        id: this.currentUid\n      };\n      this.$ajax.post('/api/user/getUserById', this.$qs.stringify(data)).then(function (response) {\n        _this11.user = response.data; // console.log(response.data);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    //博客列表\n    getBlogList: function getBlogList() {\n      var _this12 = this;\n\n      var data = {\n        userId: this.currentUid\n      };\n      this.$ajax.post('/api/blog/getBlogList', this.$qs.stringify(data)).then(function (response) {\n        _this12.blogList = response.data;\n        localStorage.setItem(\"cname\", true); // this.$router.go(0);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    //退出登录\n    loginOut: function loginOut() {\n      localStorage.removeItem(\"login\");\n      console.log(\"localStorage=login----\" + localStorage.getItem(\"login\")); // this.$router.push(\"/\");\t\t这个会跳转当前页面，但是不会刷新\n\n      this.$router.go(0); //重新刷新当前页面\n    },\n    goEditor: function goEditor() {\n      console.log(\"写博客\");\n      this.$router.push(\"/editor\");\n    }\n  }\n};",{"version":3,"sources":["myBlogCenter.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<nav class=\"navbar navbar-default\">\r\n\t\t\t<div class=\"container-fluid\">\r\n\t\t\t\t<div class=\"collapse navbar-collapse\" id=\"bs-example-navbar-collapse-1\">\r\n\t\t\t\t\t<ul class=\"nav navbar-nav\">\r\n\t\t\t\t\t\t<!-- <li><a href=\"#\">SHARING</a></li> -->\r\n\t\t\t\t\t\t<li><router-link to=\"/\">首页</router-link></li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t<!-- 查询 -->\r\n\t\t\t\t\t<form class=\"navbar-form navbar-left\">\r\n\t\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t\t<input type=\"text\" v-model.trim=\"inputTitle\" name=\"queryBlogTitle\" class=\"form-control color\" placeholder=\"\">\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<button type=\"button\" @click=\"likeTitle\" class=\"btn btn-default color\">搜索</button>\r\n\t\t\t\t\t\t<!-- <span v-show=\"inputResultNull\" style=\"color: red;margin-left: 10px;\">未查到</span> -->\r\n\t\t\t\t\t</form>\r\n\t\t\t\t\t<ul class=\"nav navbar-nav navbar-right\">\r\n\t\t\t\t\t\t<li><router-link to=\"/editor0\">写博客</router-link></li>\r\n\t\t\t\t\t\t<li class=\"dropdown\"  v-if=\"isLogin\">\r\n\t\t\t\t\t\t\t<a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\" role=\"button\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n\t\t\t\t\t\t\t\t消息\r\n\t\t\t\t\t\t\t\t<span v-show=\"unread.allLength != 0\" class=\"badge\" style=\"background-color: #CD0000;\">\r\n\t\t\t\t\t\t\t\t\t{{unread.allLength}}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<span class=\"caret\"></span>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t<ul class=\"dropdown-menu\" style=\"text-align: left; padding-left: 20px;\">\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<a href=\"#\" @click=\"gotoBlogCenter(unread.pubusers.id)\">公告\r\n\t\t\t\t\t\t\t\t\t\t<span v-show=\"unread.pubLength != 0\" class=\"badge\" style=\"background-color: #CD0000;\">{{unread.pubLength}}</span>\r\n\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<router-link to=\"/beCom\">评论\r\n\t\t\t\t\t\t\t\t\t\t<span v-show=\"unread.comLength != 0\"  class=\"badge\" style=\"background-color: #CD0000;\">{{unread.comLength}}</span>\r\n\t\t\t\t\t\t\t\t\t</router-link>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<router-link to=\"/beAppre\">点赞\r\n\t\t\t\t\t\t\t\t\t\t<span v-show=\"unread.appreLength != 0\" class=\"badge\" style=\"background-color: #CD0000;\">{{unread.appreLength}}</span>\r\n\t\t\t\t\t\t\t\t\t</router-link>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<router-link to=\"/beAttack\">关注\r\n\t\t\t\t\t\t\t\t\t\t<span v-show=\"unread.attenLength != 0\" class=\"badge\" style=\"background-color: #CD0000;\">{{unread.attenLength}}</span>\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t</router-link>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li class=\"dropdown\" v-if=\"isLogin\">\r\n\t\t\t\t\t\t\t<a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\" role=\"button\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n\t\t\t\t\t\t\t\t我的\r\n\t\t\t\t\t\t\t\t<span class=\"caret\"></span>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t<ul class=\"dropdown-menu\">\r\n\t\t\t\t\t\t\t\t<li><router-link to=\"/message\">个人资料</router-link></li>\r\n\t\t\t\t\t\t\t\t<li><router-link :to=\"`/myBlogCenter${loginUid}`\">博客中心</router-link></li>\r\n\t\t\t\t\t\t\t\t<li><router-link to=\"/collect\">我的收藏</router-link></li>\r\n\t\t\t\t\t\t\t\t<li><router-link to=\"/follow\">我的关注</router-link></li>\r\n\t\t\t\t\t\t\t\t<li><router-link to=\"/myfan\">我的粉丝</router-link></li>\r\n\t\t\t\t\t\t\t\t<li><a href=\"#\" @click=\"loginOut\">登出</a></li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li v-else=\"isLogin\"><router-link to=\"/login\">登录/注册</router-link></a></li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</nav>\r\n\t\t\r\n\t\t<!-- 左边 -->\r\n\t\t<div class=\"D-card-left\">\r\n\t\t\t<!-- 博主详情 -->\r\n\t\t\t<div class=\"card-left-user\">\r\n\t\t\t\t<!-- 头像 -->\r\n\t\t\t\t<div class=\"card-left-user-ava\">\r\n\t\t\t\t\t<div class=\"card-left-user-ava-\"><img :src=\"user.avatar\"/></div>\r\n\t\t\t\t\t<div class=\"card-left-user-ava-detail\">\r\n\t\t\t\t\t\t<div name=\"username\" class=\"username\"><b><a href=\"#\"  @click=\"gotoBlogCenter(user.id)\">{{user.username}}</a></b></div>\r\n\t\t\t\t\t\t<a href=\"#\" @click=\"gotoBlogCenter(user.id)\"><div class=\"gohouse\">TA的博客中心<i class=\"layui-icon layui-icon-right\"></i></div></a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<!-- 原创粉丝。。。 -->\r\n\t\t\t\t<div class=\"five-parts\">\r\n\t\t\t\t\t<div class=\"part\">\r\n\t\t\t\t\t\t<div>博客</div>\r\n\t\t\t\t\t\t<dt>{{user.blognum}}</dt>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"part\">\r\n\t\t\t\t\t\t<div>粉丝</div>\r\n\t\t\t\t\t\t<dt>{{user.fans}}</dt>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"part\">\r\n\t\t\t\t\t\t<div>获赞</div>\r\n\t\t\t\t\t\t<dt>{{user.appreciate}}</dt>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"part\">\r\n\t\t\t\t\t\t<div>评论</div>\r\n\t\t\t\t\t\t<dt>{{user.communicate}}</dt>\r\n\t\t\t\t\t</div class=\"part\">\r\n\t\t\t\t\t<div class=\"part\">\r\n\t\t\t\t\t\t<div>访问</div>\r\n\t\t\t\t\t\t<dt>{{user.visitedNumber}}</dt>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<!-- 等级 -->\r\n\t\t\t\t<div class=\"sort-parts\">\r\n\t\t\t\t\t<div>等级：<span><b>{{usersmark.floor}}</b></span></div>\r\n\t\t\t\t\t<div>博客排名：<span><b>{{usersmark.blogFloor}}</b></span></div>\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"sort-parts\">\r\n\t\t\t\t\t<div>粉丝排名：<span><b>{{usersmark.fanFloor}}</b></span></div>\r\n\t\t\t\t\t<div>点赞排名：<span><b>{{usersmark.wellFloor}}</b></span></div>\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"sort-parts part-last\">\r\n\t\t\t\t\t<div>评论排名：<span><b>{{usersmark.replyFloor}}</b></span></div>\r\n\t\t\t\t\t<div>访问排名：<span><b>{{usersmark.visitFloor}}</b></span></div>\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"other-more\" v-show=\"user.id != loginUid\">\r\n\t\t\t\t\t<button @click=\"attention\" class=\"other-more-see\">关注</button>\r\n\t\t\t\t\t<button class=\"other-more-msg\"  @click=\"gotoBlogCenter(user.id)\">博客</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<!-- 最新博客 -->\r\n\t\t\t<div class=\"blog-last\" v-show=\"newSixBloglist\">\r\n\t\t\t\t<div class=\"blog-fam \">\r\n\t\t\t\t\t<span class=\"glyphicon glyphicon-tags\" aria-hidden=\"true\" style=\"color: #B22222; margin-right: 12px;\"></span>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<b>最新</b>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"zon-title\">\r\n\t\t\t\t\t<div v-for=\"blog in newSixBloglist\">\r\n\t\t\t\t\t\t<a href=\"#\" @click=\"gotoBlogDetail(blog.id)\">{{blog.title}}</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<!-- 博客分类 -->\r\n\t\t\t<div class=\"blog-sort\">\r\n\t\t\t\t<div class=\"blog-fam\">\r\n\t\t\t\t\t<span class=\"glyphicon glyphicon-tags\" aria-hidden=\"true\" style=\"color: #B22222; margin-right: 12px;\"></span>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<b>分类</b>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"blog-sort-each\">\r\n\t\t\t\t\t<p v-for=\"(item, index) in classifyList\" :key=\"index\">\r\n\t\t\t\t\t\t<a href=\"#\" @click=\"findCnameList(item.classify.id, currentUid)\">\r\n\t\t\t\t\t\t\t<img class=\"sort-each-img\" :src=\"`img/sortBlog/${(index+1)%10}.jpg`\"/>\r\n\t\t\t\t\t\t\t<span class=\"sort-each-name\">{{item.classify.classname}}</span>\r\n\t\t\t\t\t\t\t<span class=\"sort-each-num\">{{item.num}}篇</span>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t<!-- 热门文章 -->\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\"blog-fam \">\r\n\t\t\t\t\t<span class=\"glyphicon glyphicon-tags\" aria-hidden=\"true\" style=\"color: #B22222; margin-right: 12px;\"></span>\r\n\t\t\t\t\t<b>热门</b>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"blog-sort-hot\">\r\n\t\t\t\t\t<div v-for=\"blog in sixHotBlog\">\r\n\t\t\t\t\t\t<p class=\"hot-title\"><a href=\"#\" @click=\"gotoBlogDetail(blog.id)\">{{blog.title}}</a></p>\r\n\t\t\t\t\t\t<p class=\"hot-num\">阅读数 {{blog.visitedNumber}}</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t\r\n\t\t<!-- 右边 -->\r\n\t\t<div class=\"D-card-right\">\r\n\t\t\t<div>\r\n\t\t\t\t<!-- <div class=\"layui-card-header blog-fam how-sort\" v-if=\"showCname\">\r\n\t\t\t\t\t\r\n\t\t\t\t</div> -->\r\n\t\t\t\t<div class=\"layui-card-header blog-fam how-sort\" >排序：\r\n\t\t\t\t\t<span><a href=\"#\" @click=\"getBlogList\">默认</a></span>\r\n\t\t\t\t\t<span><a href=\"#\" @click=\"timeLast\">按创建时间</a></span>\r\n\t\t\t\t\t<span><a href=\"#\" @click=\"byVisitnum\">按访问量</a></span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<!-- 全部博客显示 -->\r\n\t\t\t\t<div class=\"blog-detail\" v-for=\"blog in blogList\">\r\n\t\t\t\t\t<p class=\"oneline\">\r\n\t\t\t\t\t\t<span class=\"glyphicon glyphicon-hand-right\" aria-hidden=\"true\" style=\"color: #B22222; margin-right: 8px;\"></span>\r\n\t\t\t\t\t\t<a href=\"#\" @click=\"gotoBlogDetail(blog.id)\">{{blog.title}}</a>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<div class=\"blog-detail-content\">\r\n\t\t\t\t\t\t{{blog.content.replace(/<[^>]+>/g, \"\")}}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style=\"height: 22px;\">\r\n\t\t\t\t\t\t<div class=\"blog-detail-message\">\r\n\t\t\t\t\t\t\t<span>{{blog.updateTime | formatDate}} </span> | &nbsp;\r\n\t\t\t\t\t\t\t阅读数<span class=\"num\">{{blog.visitedNumber}}</span> | &nbsp;\r\n\t\t\t\t\t\t\t评论数<span class=\"num\">{{blog.communicate}}</span>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"blog-detail-operate\" v-show=\"loginUid == currentUid\">\r\n\t\t\t\t\t\t\t<a href=\"#\" @click=\"gotoEditor(blog.id)\" class=\"update\" >编辑</a> | \r\n\t\t\t\t\t\t\t<a href=\"#\" @click=\"deleteBlog(blog.id)\" class=\"delete\">删除</a>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t</div> \r\n\t\t</div>\r\n\t\t\r\n\t\t\r\n\t</div>\n</template>\n\n<script>\r\n\timport moment from 'moment'\t\t//处理时间戳\r\n\texport default{\r\n\t\tdata(){\r\n\t\t\treturn{\r\n\t\t\t\tisLogin:false,\r\n\t\t\t\tloginUid:localStorage.getItem(\"login\"),\r\n\t\t\t\tcurrentUid:\"\",\t//某个被查看用户的id\r\n\t\t\t\tuser:\"\",\t//当前被查看用户\r\n\t\t\t\tblogList:\"\",\t//博客列表\r\n\t\t\t\tnewSixBloglist:{},\t//最新的6个博客\r\n\t\t\t\tclassifyList:{},\t//博客分类列表\r\n\t\t\t\tsixHotBlog:{},\t\t//阅读数最多的6个博客\r\n\t\t\t\tusersmark:{},\t\t//排名\t等级\r\n\t\t\t\tmessage:{},\t\t\t//公告，评论，点赞，关注\r\n\t\t\t\tunread:{},\t//未读的关注消息列表\r\n\t\t\t\t// inputResultNull:false,\t\t//未查到\r\n\t\t\t\tinputTitle:\"\",\t//要查询的博客标题\r\n\t\t\t\t// showCname:\"\",\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t// this.showCname = localStorage.getItem(\"cname\");\r\n\t\t\t//判断是否要出现“我的，消息”链接\r\n\t\t\tif(localStorage.getItem(\"login\")!=null){\r\n\t\t\t\tthis.isLogin=true;\r\n\t\t\t}\r\n\t\t\t//获取某个被查看用户的id\r\n\t\t\tthis.currentUid = this.$router.history.current.params.userId;\r\n\t\t\t// console.log(this.currentUid);\r\n\t\t\t//获取当前的用户信息\r\n\t\t\tthis.getUser();\r\n\t\t\t//最新的6个博客\r\n\t\t\tthis.getSixBlogs();\r\n\t\t\t//6个最火（点击量多）blog\r\n\t\t\tthis.getHotBlogs()\r\n\t\t\t//博客分类列表\r\n\t\t\tthis.getClassifylist();\r\n\t\t\t//排名总运算\r\n\t\t\tthis.getFloor();\r\n\t\t\t//博客列表\r\n\t\t\tif(!this.blogList){\r\n\t\t\t\tthis.getBlogList();\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t//查找未读的关注消息列表\r\n\t\t\tthis.getUnread();\r\n\t\t\t\r\n\t\t},\r\n\t\tfilters: {\r\n\t\t\tformatDate: function (value) {\r\n\t\t\t\t// console.log(value.time);\r\n\t\t\t\t// return moment(moment(value).format('YYYY MM DD HH:mm:ss')).valueOf();\r\n\t\t\t\treturn moment(value.time).format('YYYY-MM-DD HH:mm:ss');\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tmethods:{\r\n\t\t\t//查找博客分类表\r\n\t\t\tfindCnameList(cid, curUid){\r\n\t\t\t\tlet data={\r\n\t\t\t\t\tcid:cid,\r\n\t\t\t\t\tuserId:curUid\r\n\t\t\t\t}\r\n\t\t\t\tthis.$ajax.post(\"/api/blog/cnameBlogList\", this.$qs.stringify(data))\r\n\t\t\t\t.then(response =>{\r\n\t\t\t\t\tthis.blogList = response.data;\r\n\t\t\t\t\t//设置顶头的分类名显示\r\n\t\t\t\t\t// localStorage.setItem(\"cname\", false);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error =>{\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//模糊查询博客\r\n\t\t\tlikeTitle(){\r\n\t\t\t\tif(!this.inputTitle){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.$router.push(`/selectBlog${this.inputTitle}`);\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t//查找未读的关注消息列表\r\n\t\t\tgetUnread(){\r\n\t\t\t\t//判断用户是否登录\r\n\t\t\t\tif(!this.isLogin){//用户没登录就直接返回\t不执行\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tlet data={\r\n\t\t\t\t\t\treceiveUserId:this.loginUid,\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$ajax.post('/api/notice/messagelist', this.$qs.stringify(data))\r\n\t\t\t\t\t.then(response =>{\r\n\t\t\t\t\t\tthis.unread = response.data;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(error =>{\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t//排名总运算\r\n\t\t\tgetFloor(){\r\n\t\t\t\tlet data ={\r\n\t\t\t\t\tuid:this.currentUid,\r\n\t\t\t\t}\r\n\t\t\t\tthis.$ajax.post('/api/user/computeFloor', this.$qs.stringify(data))\r\n\t\t\t\t.then(response =>{\r\n\t\t\t\t\tconsole.log(response.data);\r\n\t\t\t\t\tthis.usersmark = response.data;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error =>{\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//6个最火（点击量多）blog\r\n\t\t\tgetHotBlogs(){\r\n\t\t\t\tlet data={\r\n\t\t\t\t\tuserId :this.currentUid,\r\n\t\t\t\t}\r\n\t\t\t\tthis.$ajax.post('/api/blog/sixHotBlogs', this.$qs.stringify(data))\r\n\t\t\t\t.then(response =>{\r\n\t\t\t\t\tthis.sixHotBlog = response.data;\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error =>{\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//博客分类\r\n\t\t\tgetClassifylist(){\r\n\t\t\t\tlet data={\r\n\t\t\t\t\tuserId:this.currentUid,\r\n\t\t\t\t}\r\n\t\t\t\tthis.$ajax.post('/api/classify/classnameList', this.$qs.stringify(data))\r\n\t\t\t\t.then(response =>{\r\n\t\t\t\t\tthis.classifyList = response.data;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error =>{\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//最新的6个博客\r\n\t\t\tgetSixBlogs(){\r\n\t\t\t\tlet data ={\r\n\t\t\t\t\tuserId:this.currentUid,\r\n\t\t\t\t}\r\n\t\t\t\tthis.$ajax.post('/api/blog/sixNewList', this.$qs.stringify(data))\r\n\t\t\t\t.then(response =>{\r\n\t\t\t\t\tthis.newSixBloglist = response.data;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error =>{\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//按访问量排序\r\n\t\t\tbyVisitnum(){\r\n\t\t\t\tlet data={\r\n\t\t\t\t\tuserId:this.currentUid,\r\n\t\t\t\t}\r\n\t\t\t\tthis.$ajax.post('/api/blog/orderByVisit', this.$qs.stringify(data))\r\n\t\t\t\t.then(response =>{\r\n\t\t\t\t\tthis.blogList = response.data;\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error =>{\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//按创建时间排序博客\r\n\t\t\ttimeLast(){\r\n\t\t\t\tlet data={\r\n\t\t\t\t\tuserId:this.currentUid,\r\n\t\t\t\t}\r\n\t\t\t\tthis.$ajax.post('/api/blog/timeLastBloglist', this.$qs.stringify(data))\r\n\t\t\t\t.then(response =>{\r\n\t\t\t\t\tthis.blogList = response.data;\r\n\t\t\t\t\t// this.$router.go(0);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error =>{\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//删除博客\r\n\t\t\tdeleteBlog(bid){\r\n\t\t\t\tlet data={\r\n\t\t\t\t\tbid:bid,\r\n\t\t\t\t\tuid:this.loginUid,\r\n\t\t\t\t}\r\n\t\t\t\tthis.$ajax.post('/api/blog/deleteVueBlog', this.$qs.stringify(data))\r\n\t\t\t\t.then(response =>{\r\n\t\t\t\t\talert(\"删除成功\");\r\n\t\t\t\t\tthis.$router.go(0);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error =>{\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//编辑博客\r\n\t\t\tgotoEditor(bid){\r\n\t\t\t\tthis.$router.push(`/editor${bid}`);\r\n\t\t\t},\r\n\t\t\t//查看博客\r\n\t\t\tgotoBlogDetail(bid){\r\n\t\t\t\tthis.$router.push(`/blogDetail${bid}`);\r\n\t\t\t},\r\n\t\t\t//去博客中心\r\n\t\t\tgotoBlogCenter(uid){\r\n\t\t\t\t// alert(uid);\r\n\t\t\t\tthis.$router.push(`/myBlogCenter${uid}`);\r\n\t\t\t},\r\n\t\t\t//添加“关注”消息记录\r\n\t\t\tsetAttentionRecord(){\r\n\t\t\t\tlet data={\r\n\t\t\t\t\tsendUserId:localStorage.getItem(\"login\"),\r\n\t\t\t\t\treceiveUserId:this.user.id,\r\n\t\t\t\t\ttype:\"关注\",\r\n\t\t\t\t}\r\n\t\t\t\tthis.$ajax.post('/api/notice/attentionRecord', this.$qs.stringify(data))\r\n\t\t\t\t.then(response =>{\r\n\t\t\t\t\tconsole.log(\"关注记录\");\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error =>{\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//关注\r\n\t\t\tattention(){\r\n\t\t\t\t//判断登录\r\n\t\t\t\tif(!this.isLogin){\r\n\t\t\t\t\tthis.$router.push(\"login\");\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tlet data={\r\n\t\t\t\t\t\tuserId:localStorage.getItem(\"login\"),\r\n\t\t\t\t\t\tbyUserId:this.user.id,\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$ajax.post('/api/attention/addAttention', this.$qs.stringify(data))\r\n\t\t\t\t\t.then(response =>{\r\n\t\t\t\t\t\t// 要判断有没有关注，关注的话，往通知表里加 “关注” 记录\r\n\t\t\t\t\t\tif(response.data==\"成功关注\"){\r\n\t\t\t\t\t\t\t//添加\"关注\"消息记录\r\n\t\t\t\t\t\t\tthis.setAttentionRecord();\r\n\t\t\t\t\t\t\t// alert(response.data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\talert(response.data);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(error =>{\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t//获取当前（被查看）用户的用户信息\r\n\t\t\tgetUser(){\r\n\t\t\t\tlet data={\r\n\t\t\t\t\tid:this.currentUid,\r\n\t\t\t\t}\r\n\t\t\t\tthis.$ajax.post('/api/user/getUserById', this.$qs.stringify(data))\r\n\t\t\t\t.then(response =>{\r\n\t\t\t\t\tthis.user=response.data;\r\n\t\t\t\t\t// console.log(response.data);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error =>{\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//博客列表\r\n\t\t\tgetBlogList(){\r\n\t\t\t\tlet data={\r\n\t\t\t\t\tuserId:this.currentUid,\r\n\t\t\t\t}\r\n\t\t\t\tthis.$ajax.post('/api/blog/getBlogList', this.$qs.stringify(data))\r\n\t\t\t\t.then(response =>{\r\n\t\t\t\t\tthis.blogList = response.data;\r\n\t\t\t\t\tlocalStorage.setItem(\"cname\", true);\r\n\t\t\t\t\t// this.$router.go(0);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error =>{\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//退出登录\r\n\t\t\tloginOut(){\r\n\t\t\t\tlocalStorage.removeItem(\"login\");\r\n\t\t\t\tconsole.log(\"localStorage=login----\"+localStorage.getItem(\"login\"));\r\n\t\t\t\t// this.$router.push(\"/\");\t\t这个会跳转当前页面，但是不会刷新\r\n\t\t\t\tthis.$router.go(0);//重新刷新当前页面\r\n\t\t\t},\r\n\t\t\tgoEditor(){\r\n\t\t\t\tconsole.log(\"写博客\");\r\n\t\t\t\tthis.$router.push(\"/editor\");\r\n\t\t\t},\r\n\t\t\t// test(){\t\t//测试\r\n\t\t\t// \tconsole.log(\"查路由--------\"+this.route);\r\n\t\t\t// \tthis.$router.go(-1);\r\n\t\t\t// },\r\n\t\t}\r\n\t}\n</script>\n\n<style>\r\n\t\r\n\t/* 右边-博客 */\r\n\t/* .D-card-right{\r\n\t\tfloat: right;\r\n\t\tmargin-right: 140px;\r\n\t\tmargin-top: -10px;\r\n\t\twidth: 59.5%;\r\n\t}\r\n\t.D-card-right>div{\r\n\t\tbackground-color: white;\r\n\t\t\r\n\t}\t */\r\n\t.how-sort{\r\n\t\tcolor: #999999;\r\n\t\tborder-bottom:solid 1px  #E8E8E8;\r\n\t\t/* margin-left: 4px; */\r\n\t}\r\n\t.how-sort>span{\r\n\t\tmargin-left: 20px;\r\n\t\tcolor: #999999;\r\n\t}\r\n\t.how-sort>span>a{\r\n\t\tcolor: #999999;\r\n\t}\r\n\t.how-sort>span>a:hover{\r\n\t\tcolor: #CD0000;\r\n\t}\r\n\t.blog-detail{\r\n\t\tpadding: 12px 20px;\r\n\t\tcolor: #333333;\r\n\t\ttext-align: center;\r\n\t\t/* height: 144px; */\r\n\t\t/* padding-bottom: ; */\r\n\t\tborder-bottom:solid 0.1px  #E8E8E8;\r\n\t}\r\n\t.blog-detail>p{\r\n\t\tfont-size: 18px;\r\n\t\ttext-align: left;\r\n\t\tcolor: #3D3D3D;\r\n\t\tfont-weight: 600;\r\n\t\tmargin-bottom: 6px;\r\n\t}\r\n\t/* 纸飞机 */\r\n\t.blog-detail>p>i{\r\n\t\tmargin-right: 5px;\r\n\t\tcolor: #CD0000;/* 红色 */\r\n\t}\r\n\t/* 博客内容只显示两行 */\r\n\t.blog-detail-content{\r\n\t\tcolor: #6B6B6B;\r\n\t\tfont-size: 14px;\r\n\t\tletter-spacing: 0.5px;/* 字与字之间的距离 */\r\n\t\tline-height: 22px;\r\n\t\ttext-align: left;\r\n\t\t\r\n\t\ttext-overflow: -o-ellipsis-lastline;\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t\tdisplay: -webkit-box;\r\n\t\t-webkit-line-clamp: 2;\r\n\t\t-webkit-box-orient: vertical;\r\n\t\t\r\n\t\t\r\n\t}\r\n\t.blog-detail-message{\r\n\t\tfloat: left;\r\n\t\tcolor: #999999;\r\n\t\tline-height: 22px;\r\n\t}\r\n\t.blog-detail-message>span{\r\n\t\tmargin-right: 5px;\r\n\t}\r\n\t.blog-detail-message>.num{\r\n\t\tcolor: #3399EA;\r\n\t\tmargin-left: 4px;\r\n\t}\r\n\t/* 编辑删除 */\r\n\t.blog-detail-operate{\r\n\t\tfloat: right;\r\n\t\tcolor: #999999;\r\n\t\tline-height: 22px;\r\n\t}\r\n\t.update{\r\n\t\tmargin-right: 5px ;\r\n\t\tcolor: #3399EA;\r\n\t}\r\n\t.delete{\r\n\t\tmargin-left: 5px;\r\n\t\tcolor: #CD0000;/* 红色 */\r\n\t}\r\n\t.oneline{\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;/* 当对象内文本溢出时（超过width部分）显示省略标记（...） */\r\n\t\tword-break:keep-all;/* 强行换行,将截断英文单词 */\r\n\t\twhite-space:nowrap;/* 文本不会换行，文本会在在同一行上继续，直到遇到 <br> 标签为止。） */\r\n\t\t\r\n\t}\r\n\t/* 提示消息 */\r\n\t/* .redCir{\r\n\t\tbackground-color: #CD0000;\r\n\t\tcolor: white;\r\n\t} */\n</style>\n"],"sourceRoot":"src/components"}]}